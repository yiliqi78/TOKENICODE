# TOKENICODE Windows 端测试清单

> v0.5.4 · 测试日期：______ · 测试机型：______ · Windows 版本：______
> 显示器分辨率：______ · DPI 缩放：______%

---

## P0 · 启动和初始化（不过这关后面都不用测了）

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 0.1 | 安装包正常安装，无报错 | ☐ | |
| 0.2 | 首次启动不崩溃，显示 Setup Wizard | ☐ | CLI 未装时应弹出向导 |
| 0.3 | CLI 自动检测（npm 全局安装） | ☐ | `npm i -g @anthropic-ai/claude-code` |
| 0.4 | CLI 自动检测（Scoop 安装） | ☐ | 如有 Scoop 环境 |
| 0.5 | CLI 一键安装功能 | ☐ | Wizard 内置下载，SHA256 校验 |
| 0.6 | 登录引导（弹出终端执行 `claude login`） | ☐ | |
| 0.7 | 登录成功后进入主界面 | ☐ | Wizard 标记跳过，不再弹出 |
| 0.8 | **无黑色 console 窗口闪烁** | ☐ | CREATE_NO_WINDOW 标志生效 |

---

## P0 · 核心对话流程

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 1.1 | 新建任务（文件夹选择器弹出） | ☐ | |
| 1.2 | 选择一个**英文路径**项目文件夹 | ☐ | 如 `C:\Users\xxx\projects\test` |
| 1.3 | 发送第一条消息，Claude 响应 | ☐ | 流式输出，非卡死等待 |
| 1.4 | 消息气泡渲染正常（用户/AI 区分） | ☐ | 字体大小一致 |
| 1.5 | Markdown 代码块语法高亮 | ☐ | |
| 1.6 | Extended Thinking 折叠面板显示 | ☐ | 需开启 Deep Thinking |
| 1.7 | 工具调用卡片正常渲染 | ☐ | Read/Edit/Bash 等 |
| 1.8 | 权限确认卡片，点击后继续执行 | ☐ | |
| 1.9 | Edit 工具 diff 红蓝标注 | ☐ | |
| 1.10 | 多轮对话流畅，无卡顿 | ☐ | |

---

## P0 · Windows 路径专项（重灾区）

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 2.1 | **中文路径**项目正常工作 | ☐ | 如 `C:\Users\xxx\桌面\测试项目` |
| 2.2 | **空格路径**项目正常工作 | ☐ | 如 `C:\Users\xxx\My Projects` |
| 2.3 | **连字符路径**项目正常工作 | ☐ | 如 `C:\Users\xxx\ppt-maker`（易被误拆） |
| 2.4 | 会话列表中路径显示正确（反斜杠） | ☐ | 不出现 Unix 风格 `/` |
| 2.5 | 项目分组正确（同路径归一组） | ☐ | |
| 2.6 | 关闭重开后，历史会话仍能加载 | ☐ | 路径编码/解码往返无损 |

---

## P1 · 会话管理

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 3.1 | 会话列表正常加载 | ☐ | |
| 3.2 | 会话切换（标签式） | ☐ | |
| 3.3 | Ctrl+Tab 快速切换最近两个会话 | ☐ | |
| 3.4 | 会话重命名，关闭重开后仍保留 | ☐ | |
| 3.5 | 会话导出为 Markdown | ☐ | 导出路径和内容正确 |
| 3.6 | 会话删除（确认弹窗 + 文件清理） | ☐ | |
| 3.7 | 会话搜索过滤 | ☐ | |

---

## P1 · 文件操作

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 4.1 | 右侧文件树正常加载 | ☐ | |
| 4.2 | 文件树展开/折叠 | ☐ | |
| 4.3 | 点击文件，预览正常（Markdown/代码/图片） | ☐ | |
| 4.4 | 文件编辑并保存 | ☐ | |
| 4.5 | **拖拽文件到聊天输入框** | ☐ | 路径分隔符正确 |
| 4.6 | **拖拽文件夹到聊天输入框** | ☐ | |
| 4.7 | 右键菜单（复制/粘贴/重命名/删除） | ☐ | |
| 4.8 | 外部编辑器修改文件后自动刷新 | ☐ | FileWatcher 事件 |
| 4.9 | 粘贴图片发送，预览正常 | ☐ | base64 加载 |

---

## P1 · 设置面板

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 5.1 | 主题切换（8 种组合） | ☐ | 黑/蓝/橙/绿 × 明暗 |
| 5.2 | 字体大小调节生效 | ☐ | |
| 5.3 | 语言切换（中/英） | ☐ | |
| 5.4 | 模型选择（Opus/Sonnet/Haiku） | ☐ | |
| 5.5 | Deep Thinking 开关持久化 | ☐ | 关闭重开后状态保留 |
| 5.6 | 更新日志查看 | ☐ | |

---

## P1 · API 提供商切换（TK-303）

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 6.1 | 默认「继承系统配置」可用 | ☐ | |
| 6.2 | 切换至「官方 API」可用 | ☐ | |
| 6.3 | 配置自定义第三方端点 | ☐ | 如有第三方 API |
| 6.4 | API 连接测试按钮 | ☐ | 正确返回成功/失败 |
| 6.5 | API Key 不出现在 localStorage | ☐ | DevTools → Application 检查 |
| 6.6 | 切换提供商后新会话生效 | ☐ | 旧进程被杀，新进程启动 |

---

## P1 · 自动更新

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 7.1 | 检查更新按钮可用 | ☐ | |
| 7.2 | 有更新时显示下载进度 | ☐ | |
| 7.3 | 下载完成后一键重启安装 | ☐ | |
| 7.4 | 无更新时提示「已是最新」 | ☐ | |

---

## P1 · 斜杠命令

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 8.1 | 输入 `/` 弹出命令补全列表 | ☐ | |
| 8.2 | `/compact` 执行成功 | ☐ | Cost 行显示在卡片内 |
| 8.3 | `/cost` 显示 token 用量 | ☐ | |
| 8.4 | `/plan` 进入 Plan 模式 | ☐ | |
| 8.5 | Plan 面板正常显示和关闭 | ☐ | |

---

## P2 · 窗口和 UI

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 9.1 | 窗口拖拽移动 | ☐ | 标题栏区域 |
| 9.2 | 最小化 / 最大化 / 还原 | ☐ | 系统按钮不被遮挡 |
| 9.3 | 窗口缩放到最小尺寸不崩溃 | ☐ | min 900×600 |
| 9.4 | **高 DPI 显示器渲染** | ☐ | 125%/150%/200% 缩放 |
| 9.5 | 三栏布局拖拽调整宽度 | ☐ | 侧栏/主区域/文件区 |
| 9.6 | 布局宽度关闭重开后保留 | ☐ | |

---

## P2 · 稳定性和边界

| # | 测试项 | 结果 | 备注 |
|---|--------|------|------|
| 10.1 | 断网后提示，恢复后可继续 | ☐ | |
| 10.2 | Claude 响应中途取消 | ☐ | Stop 按钮 |
| 10.3 | 快速连续发送多条消息 | ☐ | 不崩溃不乱序 |
| 10.4 | 只读目录打开时的提示 | ☐ | |
| 10.5 | 长时间运行（>30min）无明显内存增长 | ☐ | 任务管理器观察 |
| 10.6 | 关闭应用后 CLI 子进程被清理 | ☐ | 任务管理器确认无残留 |

---

## 测试结论

| 项目 | 数量 |
|------|------|
| 总测试项 | 68 |
| 通过 | |
| 失败 | |
| 跳过 | |
| 阻塞性问题 | |

### 发现的问题

| # | 严重度 | 描述 | 复现步骤 |
|---|--------|------|----------|
| | | | |

### 结论

- [ ] 可以发布
- [ ] 需要修复后发布（列出阻塞项）
- [ ] 不建议发布
